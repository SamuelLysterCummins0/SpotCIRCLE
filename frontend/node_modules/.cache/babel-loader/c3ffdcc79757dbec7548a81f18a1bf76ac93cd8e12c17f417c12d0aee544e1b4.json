{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samly\\\\Desktop\\\\CvProjects\\\\SpotCIRCLE\\\\frontend\\\\src\\\\components\\\\SpotifyPlayer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpotifyPlayer = ({\n  trackUri,\n  previewUrl,\n  onClose\n}) => {\n  _s();\n  const [player, setPlayer] = useState(null);\n  const [isPremium, setIsPremium] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [audio, setAudio] = useState(null);\n  useEffect(() => {\n    // Load Spotify Web Playback SDK\n    const script = document.createElement(\"script\");\n    script.src = \"https://sdk.scdn.co/spotify-player.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    // Initialize Spotify Player\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      const spotifyPlayer = new window.Spotify.Player({\n        name: 'SpotCIRCLE Web Player',\n        getOAuthToken: cb => {\n          cb(localStorage.getItem('spotify_access_token'));\n        },\n        volume: 0.5\n      });\n      spotifyPlayer.addListener('ready', ({\n        device_id\n      }) => {\n        console.log('Ready with Device ID', device_id);\n        setPlayer(spotifyPlayer);\n      });\n      spotifyPlayer.addListener('not_ready', ({\n        device_id\n      }) => {\n        console.log('Device ID has gone offline', device_id);\n      });\n      spotifyPlayer.connect().then(success => {\n        if (success) {\n          setIsPremium(true);\n        }\n      });\n    };\n    return () => {\n      if (player) {\n        player.disconnect();\n      }\n      if (audio) {\n        audio.pause();\n        audio.currentTime = 0;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!trackUri && !previewUrl) return;\n    const playTrack = async () => {\n      if (isPremium && player && trackUri) {\n        try {\n          await fetch(`https://api.spotify.com/v1/me/player/play?device_id=${player._options.id}`, {\n            method: 'PUT',\n            body: JSON.stringify({\n              uris: [trackUri]\n            }),\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${localStorage.getItem('spotify_access_token')}`\n            }\n          });\n          setIsPlaying(true);\n        } catch (error) {\n          console.error('Error playing track:', error);\n          fallbackToPreview();\n        }\n      } else {\n        fallbackToPreview();\n      }\n    };\n    const fallbackToPreview = () => {\n      if (previewUrl) {\n        if (audio) {\n          audio.pause();\n          audio.currentTime = 0;\n        }\n        const newAudio = new Audio(previewUrl);\n        newAudio.play();\n        setAudio(newAudio);\n        setIsPlaying(true);\n      }\n    };\n    playTrack();\n  }, [trackUri, previewUrl, player, isPremium]);\n  const handlePlayPause = async () => {\n    if (isPremium && player) {\n      const state = await player.getCurrentState();\n      if (state && state.paused) {\n        await player.resume();\n      } else {\n        await player.pause();\n      }\n    } else if (audio) {\n      if (audio.paused) {\n        audio.play();\n      } else {\n        audio.pause();\n      }\n    }\n    setIsPlaying(!isPlaying);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-800 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePlayPause,\n        className: \"p-3 bg-green-500 rounded-full hover:bg-green-600 transition-colors\",\n        children: isPlaying ? /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-6 h-6\",\n          fill: \"currentColor\",\n          viewBox: \"0 0 20 20\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            fillRule: \"evenodd\",\n            d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z\",\n            clipRule: \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-6 h-6\",\n          fill: \"currentColor\",\n          viewBox: \"0 0 20 20\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            fillRule: \"evenodd\",\n            d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\",\n            clipRule: \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"p-2 hover:bg-gray-800 rounded-full transition-colors\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-6 h-6\",\n          fill: \"currentColor\",\n          viewBox: \"0 0 20 20\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            fillRule: \"evenodd\",\n            d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n            clipRule: \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n_s(SpotifyPlayer, \"obKBBH5eklOzzI5wNDYfvHp8w7A=\");\n_c = SpotifyPlayer;\nexport default SpotifyPlayer;\nvar _c;\n$RefreshReg$(_c, \"SpotifyPlayer\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","SpotifyPlayer","trackUri","previewUrl","onClose","_s","player","setPlayer","isPremium","setIsPremium","isPlaying","setIsPlaying","audio","setAudio","script","document","createElement","src","async","body","appendChild","window","onSpotifyWebPlaybackSDKReady","spotifyPlayer","Spotify","Player","name","getOAuthToken","cb","localStorage","getItem","volume","addListener","device_id","console","log","connect","then","success","disconnect","pause","currentTime","playTrack","fetch","_options","id","method","JSON","stringify","uris","headers","error","fallbackToPreview","newAudio","Audio","play","handlePlayPause","state","getCurrentState","paused","resume","className","children","onClick","fill","viewBox","fillRule","d","clipRule","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/samly/Desktop/CvProjects/SpotCIRCLE/frontend/src/components/SpotifyPlayer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst SpotifyPlayer = ({ trackUri, previewUrl, onClose }) => {\n  const [player, setPlayer] = useState(null);\n  const [isPremium, setIsPremium] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [audio, setAudio] = useState(null);\n\n  useEffect(() => {\n    // Load Spotify Web Playback SDK\n    const script = document.createElement(\"script\");\n    script.src = \"https://sdk.scdn.co/spotify-player.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    // Initialize Spotify Player\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      const spotifyPlayer = new window.Spotify.Player({\n        name: 'SpotCIRCLE Web Player',\n        getOAuthToken: cb => {\n          cb(localStorage.getItem('spotify_access_token'));\n        },\n        volume: 0.5\n      });\n\n      spotifyPlayer.addListener('ready', ({ device_id }) => {\n        console.log('Ready with Device ID', device_id);\n        setPlayer(spotifyPlayer);\n      });\n\n      spotifyPlayer.addListener('not_ready', ({ device_id }) => {\n        console.log('Device ID has gone offline', device_id);\n      });\n\n      spotifyPlayer.connect().then(success => {\n        if (success) {\n          setIsPremium(true);\n        }\n      });\n    };\n\n    return () => {\n      if (player) {\n        player.disconnect();\n      }\n      if (audio) {\n        audio.pause();\n        audio.currentTime = 0;\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!trackUri && !previewUrl) return;\n\n    const playTrack = async () => {\n      if (isPremium && player && trackUri) {\n        try {\n          await fetch(`https://api.spotify.com/v1/me/player/play?device_id=${player._options.id}`, {\n            method: 'PUT',\n            body: JSON.stringify({ uris: [trackUri] }),\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${localStorage.getItem('spotify_access_token')}`\n            },\n          });\n          setIsPlaying(true);\n        } catch (error) {\n          console.error('Error playing track:', error);\n          fallbackToPreview();\n        }\n      } else {\n        fallbackToPreview();\n      }\n    };\n\n    const fallbackToPreview = () => {\n      if (previewUrl) {\n        if (audio) {\n          audio.pause();\n          audio.currentTime = 0;\n        }\n        const newAudio = new Audio(previewUrl);\n        newAudio.play();\n        setAudio(newAudio);\n        setIsPlaying(true);\n      }\n    };\n\n    playTrack();\n  }, [trackUri, previewUrl, player, isPremium]);\n\n  const handlePlayPause = async () => {\n    if (isPremium && player) {\n      const state = await player.getCurrentState();\n      if (state && state.paused) {\n        await player.resume();\n      } else {\n        await player.pause();\n      }\n    } else if (audio) {\n      if (audio.paused) {\n        audio.play();\n      } else {\n        audio.pause();\n      }\n    }\n    setIsPlaying(!isPlaying);\n  };\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-800 p-4\">\n      <div className=\"container mx-auto flex justify-between items-center\">\n        <button\n          onClick={handlePlayPause}\n          className=\"p-3 bg-green-500 rounded-full hover:bg-green-600 transition-colors\"\n        >\n          {isPlaying ? (\n            <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n            </svg>\n          ) : (\n            <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\" clipRule=\"evenodd\" />\n            </svg>\n          )}\n        </button>\n        <button\n          onClick={onClose}\n          className=\"p-2 hover:bg-gray-800 rounded-full transition-colors\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SpotifyPlayer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}