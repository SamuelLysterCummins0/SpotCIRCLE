{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samly\\\\Desktop\\\\CvProjects\\\\SpotCIRCLE\\\\frontend\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport PlayerNotch from '../components/PlayerNotch';\nimport SpotifyPlayer from '../components/SpotifyPlayer';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5001/api';\nconst TimeRanges = {\n  SHORT: 'short_term',\n  MEDIUM: 'medium_term',\n  LONG: 'long_term'\n};\nconst TimeRangeLabels = {\n  [TimeRanges.SHORT]: 'Last 4 weeks',\n  [TimeRanges.MEDIUM]: 'Last 6 months',\n  [TimeRanges.LONG]: 'All time'\n};\nconst Home = () => {\n  _s();\n  const navigate = useNavigate();\n  const [tracks, setTracks] = useState([]);\n  const [topTracks, setTopTracks] = useState([]);\n  const [topArtists, setTopArtists] = useState([]);\n  const [topAlbums, setTopAlbums] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [queue, setQueue] = useState([]);\n  const [timeRange, setTimeRange] = useState(TimeRanges.SHORT);\n  const [hoveredTrack, setHoveredTrack] = useState(null);\n  const refreshAccessToken = async () => {\n    try {\n      const refresh_token = localStorage.getItem('spotify_refresh_token');\n      if (!refresh_token) {\n        throw new Error('No refresh token available');\n      }\n      const response = await axios.get(`${API_URL}/auth/refresh`, {\n        params: {\n          refresh_token\n        }\n      });\n      localStorage.setItem('spotify_access_token', response.data.access_token);\n      return response.data.access_token;\n    } catch (error) {\n      console.error('Error refreshing token:', error);\n      handleLogout();\n      throw error;\n    }\n  };\n  const fetchData = async (endpoint, retryWithNewToken = true) => {\n    try {\n      const token = localStorage.getItem('spotify_access_token');\n      if (!token) {\n        throw new Error('No access token available');\n      }\n      const response = await axios.get(`${API_URL}${endpoint}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (err) {\n      var _err$response;\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 && retryWithNewToken) {\n        try {\n          await refreshAccessToken();\n          return fetchData(endpoint, false);\n        } catch (refreshError) {\n          console.error('Error refreshing token:', refreshError);\n          handleLogout();\n        }\n      }\n      throw err;\n    }\n  };\n  const fetchAllData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const [topTracksData, topArtistsData] = await Promise.all([fetchData(`/tracks/top?time_range=${timeRange}`), fetchData(`/artists/top?time_range=${timeRange}`)]);\n\n      // Initialize arrays if they're undefined\n      setTopTracks(topTracksData || []);\n      setTopArtists(topArtistsData || []);\n\n      // Generate top albums from top tracks\n      const albumsMap = new Map();\n      if (topTracksData) {\n        topTracksData.forEach(track => {\n          if (track.album && !albumsMap.has(track.album.id)) {\n            albumsMap.set(track.album.id, {\n              ...track.album,\n              playCount: 1,\n              artists: track.artists // Add artists from the track\n            });\n          } else if (track.album) {\n            const album = albumsMap.get(track.album.id);\n            albumsMap.set(track.album.id, {\n              ...album,\n              playCount: album.playCount + 1\n            });\n          }\n        });\n      }\n      const topAlbumsData = Array.from(albumsMap.values()).sort((a, b) => b.playCount - a.playCount).slice(0, 10).map(album => ({\n        ...album,\n        artists: album.artists || [] // Ensure artists is always an array\n      }));\n      setTopAlbums(topAlbumsData);\n    } catch (err) {\n      console.error('Error fetching data:', err);\n      setError('Failed to load music data. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    const token = localStorage.getItem('spotify_access_token');\n    if (!token) {\n      navigate('/');\n      return;\n    }\n    fetchAllData();\n  }, [navigate, timeRange]);\n  const handleLogout = () => {\n    localStorage.removeItem('spotify_access_token');\n    localStorage.removeItem('spotify_refresh_token');\n    navigate('/');\n  };\n  const handleTrackSelect = track => {\n    setCurrentTrack(track);\n    setIsPlaying(true);\n    // Add next few tracks to queue\n    const currentIndex = topTracks.findIndex(t => t.id === track.id);\n    const nextTracks = topTracks.slice(currentIndex + 1, currentIndex + 4);\n    setQueue(nextTracks);\n  };\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const handleNext = () => {\n    if (!currentTrack || !topTracks.length) return;\n    const currentIndex = topTracks.findIndex(t => t.id === currentTrack.id);\n    const nextTrack = topTracks[currentIndex + 1];\n    if (nextTrack) {\n      handleTrackSelect(nextTrack);\n    }\n  };\n  const handlePrevious = () => {\n    if (!currentTrack || !topTracks.length) return;\n    const currentIndex = topTracks.findIndex(t => t.id === currentTrack.id);\n    const prevTrack = topTracks[currentIndex - 1];\n    if (prevTrack) {\n      handleTrackSelect(prevTrack);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-black\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4\",\n          children: \"Loading your music...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this);\n  }\n  const renderTrackList = (tracks, title) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-400\",\n          children: [\"Your top tracks from the \", TimeRangeLabels[timeRange].toLowerCase()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTimeRange(TimeRanges.SHORT),\n          className: `px-3 py-1 text-sm rounded-full transition-colors ${timeRange === TimeRanges.SHORT ? 'bg-white text-black' : 'text-white hover:bg-white/10'}`,\n          children: \"4 weeks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTimeRange(TimeRanges.MEDIUM),\n          className: `px-3 py-1 text-sm rounded-full transition-colors ${timeRange === TimeRanges.MEDIUM ? 'bg-white text-black' : 'text-white hover:bg-white/10'}`,\n          children: \"6 months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTimeRange(TimeRanges.LONG),\n          className: `px-3 py-1 text-sm rounded-full transition-colors ${timeRange === TimeRanges.LONG ? 'bg-white text-black' : 'text-white hover:bg-white/10'}`,\n          children: \"All time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4\",\n      children: tracks.map((track, index) => {\n        var _track$album, _track$album$images$;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group relative\",\n          onMouseEnter: () => setHoveredTrack(track.id),\n          onMouseLeave: () => setHoveredTrack(null),\n          onClick: () => handleTrackSelect(track),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative aspect-square\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: (_track$album = track.album) === null || _track$album === void 0 ? void 0 : (_track$album$images$ = _track$album.images[0]) === null || _track$album$images$ === void 0 ? void 0 : _track$album$images$.url,\n              alt: track.name,\n              className: \"w-full h-full object-cover rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), hoveredTrack === track.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 bg-black/60 flex items-center justify-center rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"p-3 bg-green-500 rounded-full hover:scale-105 transition-transform\",\n                children: (currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.id) === track.id && isPlaying ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-6 h-6\",\n                  fill: \"white\",\n                  viewBox: \"0 0 24 24\",\n                  children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                    x: \"6\",\n                    y: \"4\",\n                    width: \"4\",\n                    height: \"16\",\n                    fill: \"white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                    x: \"14\",\n                    y: \"4\",\n                    width: \"4\",\n                    height: \"16\",\n                    fill: \"white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-6 h-6\",\n                  fill: \"white\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M8 5v14l11-7z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-medium truncate\",\n              children: track.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-400 truncate\",\n              children: track.artists.map(a => a.name).join(', ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: [Math.floor(track.duration_ms / 60000), \":\", String(Math.floor(track.duration_ms % 60000 / 1000)).padStart(2, '0'), \" \\u2022 \", index + 1, \" streams\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, track.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n  const renderArtistList = (artists, title) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-400\",\n          children: [\"Your top artists from the \", TimeRangeLabels[timeRange].toLowerCase()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4\",\n      children: artists.map((artist, index) => {\n        var _artist$images$;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative aspect-square\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: (_artist$images$ = artist.images[0]) === null || _artist$images$ === void 0 ? void 0 : _artist$images$.url,\n              alt: artist.name,\n              className: \"w-full h-full object-cover rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-medium truncate\",\n              children: artist.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: [artist.minutes, \" minutes \\u2022 \", artist.streams, \" streams\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, artist.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n  const renderAlbumList = (albums, title) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-400\",\n          children: [\"Your top albums from the \", TimeRangeLabels[timeRange].toLowerCase()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4\",\n      children: albums.map((album, index) => {\n        var _album$images$;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative aspect-square\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: (_album$images$ = album.images[0]) === null || _album$images$ === void 0 ? void 0 : _album$images$.url,\n              alt: album.name,\n              className: \"w-full h-full object-cover rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-medium truncate\",\n              children: album.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-400 truncate\",\n              children: album.artists.map(a => a.name).join(', ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: [album.playCount, \" plays\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)]\n        }, album.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-black text-white\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-[1800px] mx-auto p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold\",\n          children: \"SpotCIRCLE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-red-500 bg-red-500/10 p-4 rounded-lg\",\n        children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"block mx-auto mt-4 px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [renderTrackList(topTracks, 'Top tracks'), renderArtistList(topArtists, 'Top artists'), renderAlbumList(topAlbums, 'Top albums')]\n      }, void 0, true), currentTrack && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(PlayerNotch, {\n          track: currentTrack,\n          isPlaying: isPlaying,\n          onPlayPause: handlePlayPause,\n          onNext: handleNext,\n          onPrevious: handlePrevious,\n          queue: queue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SpotifyPlayer, {\n          uri: currentTrack.uri,\n          isPlaying: isPlaying,\n          onPlayPause: setIsPlaying\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 336,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"6xPTXlIJJFm49a8QbJIRIcx55dI=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","PlayerNotch","SpotifyPlayer","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","TimeRanges","SHORT","MEDIUM","LONG","TimeRangeLabels","Home","_s","navigate","tracks","setTracks","topTracks","setTopTracks","topArtists","setTopArtists","topAlbums","setTopAlbums","loading","setLoading","error","setError","currentTrack","setCurrentTrack","isPlaying","setIsPlaying","queue","setQueue","timeRange","setTimeRange","hoveredTrack","setHoveredTrack","refreshAccessToken","refresh_token","localStorage","getItem","Error","response","get","params","setItem","data","access_token","console","handleLogout","fetchData","endpoint","retryWithNewToken","token","headers","Authorization","err","_err$response","status","refreshError","fetchAllData","topTracksData","topArtistsData","Promise","all","albumsMap","Map","forEach","track","album","has","id","set","playCount","artists","topAlbumsData","Array","from","values","sort","a","b","slice","map","removeItem","handleTrackSelect","currentIndex","findIndex","t","nextTracks","handlePlayPause","handleNext","length","nextTrack","handlePrevious","prevTrack","className","children","fileName","_jsxFileName","lineNumber","columnNumber","renderTrackList","title","toLowerCase","onClick","index","_track$album","_track$album$images$","onMouseEnter","onMouseLeave","src","images","url","alt","name","fill","viewBox","x","y","width","height","d","join","Math","floor","duration_ms","String","padStart","renderArtistList","artist","_artist$images$","minutes","streams","renderAlbumList","albums","_album$images$","window","location","reload","onPlayPause","onNext","onPrevious","uri","_c","$RefreshReg$"],"sources":["C:/Users/samly/Desktop/CvProjects/SpotCIRCLE/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport PlayerNotch from '../components/PlayerNotch';\nimport SpotifyPlayer from '../components/SpotifyPlayer';\n\nconst API_URL = 'http://localhost:5001/api';\n\nconst TimeRanges = {\n  SHORT: 'short_term',\n  MEDIUM: 'medium_term',\n  LONG: 'long_term'\n};\n\nconst TimeRangeLabels = {\n  [TimeRanges.SHORT]: 'Last 4 weeks',\n  [TimeRanges.MEDIUM]: 'Last 6 months',\n  [TimeRanges.LONG]: 'All time'\n};\n\nconst Home = () => {\n  const navigate = useNavigate();\n  const [tracks, setTracks] = useState([]);\n  const [topTracks, setTopTracks] = useState([]);\n  const [topArtists, setTopArtists] = useState([]);\n  const [topAlbums, setTopAlbums] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [queue, setQueue] = useState([]);\n  const [timeRange, setTimeRange] = useState(TimeRanges.SHORT);\n  const [hoveredTrack, setHoveredTrack] = useState(null);\n\n  const refreshAccessToken = async () => {\n    try {\n      const refresh_token = localStorage.getItem('spotify_refresh_token');\n      if (!refresh_token) {\n        throw new Error('No refresh token available');\n      }\n\n      const response = await axios.get(`${API_URL}/auth/refresh`, {\n        params: { refresh_token }\n      });\n\n      localStorage.setItem('spotify_access_token', response.data.access_token);\n      return response.data.access_token;\n    } catch (error) {\n      console.error('Error refreshing token:', error);\n      handleLogout();\n      throw error;\n    }\n  };\n\n  const fetchData = async (endpoint, retryWithNewToken = true) => {\n    try {\n      const token = localStorage.getItem('spotify_access_token');\n      if (!token) {\n        throw new Error('No access token available');\n      }\n\n      const response = await axios.get(`${API_URL}${endpoint}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (err) {\n      if (err.response?.status === 401 && retryWithNewToken) {\n        try {\n          await refreshAccessToken();\n          return fetchData(endpoint, false);\n        } catch (refreshError) {\n          console.error('Error refreshing token:', refreshError);\n          handleLogout();\n        }\n      }\n      throw err;\n    }\n  };\n\n  const fetchAllData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const [topTracksData, topArtistsData] = await Promise.all([\n        fetchData(`/tracks/top?time_range=${timeRange}`),\n        fetchData(`/artists/top?time_range=${timeRange}`)\n      ]);\n\n      // Initialize arrays if they're undefined\n      setTopTracks(topTracksData || []);\n      setTopArtists(topArtistsData || []);\n\n      // Generate top albums from top tracks\n      const albumsMap = new Map();\n      if (topTracksData) {\n        topTracksData.forEach(track => {\n          if (track.album && !albumsMap.has(track.album.id)) {\n            albumsMap.set(track.album.id, {\n              ...track.album,\n              playCount: 1,\n              artists: track.artists // Add artists from the track\n            });\n          } else if (track.album) {\n            const album = albumsMap.get(track.album.id);\n            albumsMap.set(track.album.id, {\n              ...album,\n              playCount: album.playCount + 1\n            });\n          }\n        });\n      }\n\n      const topAlbumsData = Array.from(albumsMap.values())\n        .sort((a, b) => b.playCount - a.playCount)\n        .slice(0, 10)\n        .map(album => ({\n          ...album,\n          artists: album.artists || [] // Ensure artists is always an array\n        }));\n\n      setTopAlbums(topAlbumsData);\n\n    } catch (err) {\n      console.error('Error fetching data:', err);\n      setError('Failed to load music data. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('spotify_access_token');\n    if (!token) {\n      navigate('/');\n      return;\n    }\n    fetchAllData();\n  }, [navigate, timeRange]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('spotify_access_token');\n    localStorage.removeItem('spotify_refresh_token');\n    navigate('/');\n  };\n\n  const handleTrackSelect = (track) => {\n    setCurrentTrack(track);\n    setIsPlaying(true);\n    // Add next few tracks to queue\n    const currentIndex = topTracks.findIndex(t => t.id === track.id);\n    const nextTracks = topTracks.slice(currentIndex + 1, currentIndex + 4);\n    setQueue(nextTracks);\n  };\n\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n\n  const handleNext = () => {\n    if (!currentTrack || !topTracks.length) return;\n    const currentIndex = topTracks.findIndex(t => t.id === currentTrack.id);\n    const nextTrack = topTracks[currentIndex + 1];\n    if (nextTrack) {\n      handleTrackSelect(nextTrack);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (!currentTrack || !topTracks.length) return;\n    const currentIndex = topTracks.findIndex(t => t.id === currentTrack.id);\n    const prevTrack = topTracks[currentIndex - 1];\n    if (prevTrack) {\n      handleTrackSelect(prevTrack);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-black\">\n        <div className=\"text-center text-white\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white mx-auto\"></div>\n          <p className=\"mt-4\">Loading your music...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const renderTrackList = (tracks, title) => (\n    <div className=\"mb-12\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">{title}</h2>\n          <p className=\"text-sm text-gray-400\">Your top tracks from the {TimeRangeLabels[timeRange].toLowerCase()}</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setTimeRange(TimeRanges.SHORT)}\n            className={`px-3 py-1 text-sm rounded-full transition-colors ${\n              timeRange === TimeRanges.SHORT ? 'bg-white text-black' : 'text-white hover:bg-white/10'\n            }`}\n          >\n            4 weeks\n          </button>\n          <button\n            onClick={() => setTimeRange(TimeRanges.MEDIUM)}\n            className={`px-3 py-1 text-sm rounded-full transition-colors ${\n              timeRange === TimeRanges.MEDIUM ? 'bg-white text-black' : 'text-white hover:bg-white/10'\n            }`}\n          >\n            6 months\n          </button>\n          <button\n            onClick={() => setTimeRange(TimeRanges.LONG)}\n            className={`px-3 py-1 text-sm rounded-full transition-colors ${\n              timeRange === TimeRanges.LONG ? 'bg-white text-black' : 'text-white hover:bg-white/10'\n            }`}\n          >\n            All time\n          </button>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4\">\n        {tracks.map((track, index) => (\n          <div\n            key={track.id}\n            className=\"group relative\"\n            onMouseEnter={() => setHoveredTrack(track.id)}\n            onMouseLeave={() => setHoveredTrack(null)}\n            onClick={() => handleTrackSelect(track)}\n          >\n            <div className=\"relative aspect-square\">\n              <img\n                src={track.album?.images[0]?.url}\n                alt={track.name}\n                className=\"w-full h-full object-cover rounded-lg\"\n              />\n              {hoveredTrack === track.id && (\n                <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center rounded-lg\">\n                  <button className=\"p-3 bg-green-500 rounded-full hover:scale-105 transition-transform\">\n                    {currentTrack?.id === track.id && isPlaying ? (\n                      <svg className=\"w-6 h-6\" fill=\"white\" viewBox=\"0 0 24 24\">\n                        <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" fill=\"white\" />\n                        <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" fill=\"white\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-6 h-6\" fill=\"white\" viewBox=\"0 0 24 24\">\n                        <path d=\"M8 5v14l11-7z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              )}\n            </div>\n            <div className=\"mt-2\">\n              <h3 className=\"font-medium truncate\">{track.name}</h3>\n              <p className=\"text-sm text-gray-400 truncate\">\n                {track.artists.map(a => a.name).join(', ')}\n              </p>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                {Math.floor(track.duration_ms / 60000)}:{String(Math.floor((track.duration_ms % 60000) / 1000)).padStart(2, '0')} • {index + 1} streams\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderArtistList = (artists, title) => (\n    <div className=\"mb-12\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">{title}</h2>\n          <p className=\"text-sm text-gray-400\">Your top artists from the {TimeRangeLabels[timeRange].toLowerCase()}</p>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4\">\n        {artists.map((artist, index) => (\n          <div key={artist.id} className=\"group\">\n            <div className=\"relative aspect-square\">\n              <img\n                src={artist.images[0]?.url}\n                alt={artist.name}\n                className=\"w-full h-full object-cover rounded-full\"\n              />\n            </div>\n            <div className=\"mt-2 text-center\">\n              <h3 className=\"font-medium truncate\">{artist.name}</h3>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                {artist.minutes} minutes • {artist.streams} streams\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderAlbumList = (albums, title) => (\n    <div className=\"mb-12\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">{title}</h2>\n          <p className=\"text-sm text-gray-400\">Your top albums from the {TimeRangeLabels[timeRange].toLowerCase()}</p>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4\">\n        {albums.map((album, index) => (\n          <div key={album.id} className=\"group\">\n            <div className=\"relative aspect-square\">\n              <img\n                src={album.images[0]?.url}\n                alt={album.name}\n                className=\"w-full h-full object-cover rounded-lg\"\n              />\n            </div>\n            <div className=\"mt-2\">\n              <h3 className=\"font-medium truncate\">{album.name}</h3>\n              <p className=\"text-sm text-gray-400 truncate\">\n                {album.artists.map(a => a.name).join(', ')}\n              </p>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                {album.playCount} plays\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <div className=\"max-w-[1800px] mx-auto p-8\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-4xl font-bold\">SpotCIRCLE</h1>\n          <button\n            onClick={handleLogout}\n            className=\"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors\"\n          >\n            Logout\n          </button>\n        </div>\n\n        {error ? (\n          <div className=\"text-center text-red-500 bg-red-500/10 p-4 rounded-lg\">\n            {error}\n            <button\n              onClick={() => window.location.reload()}\n              className=\"block mx-auto mt-4 px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors\"\n            >\n              Try Again\n            </button>\n          </div>\n        ) : (\n          <>\n            {renderTrackList(topTracks, 'Top tracks')}\n            {renderArtistList(topArtists, 'Top artists')}\n            {renderAlbumList(topAlbums, 'Top albums')}\n          </>\n        )}\n\n        {currentTrack && (\n          <>\n            <PlayerNotch\n              track={currentTrack}\n              isPlaying={isPlaying}\n              onPlayPause={handlePlayPause}\n              onNext={handleNext}\n              onPrevious={handlePrevious}\n              queue={queue}\n            />\n            <SpotifyPlayer\n              uri={currentTrack.uri}\n              isPlaying={isPlaying}\n              onPlayPause={setIsPlaying}\n            />\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}